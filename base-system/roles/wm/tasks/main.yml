- name: Install xorg
  become: true
  apt:
    name:
      - xorg

- name: Install DWM dependencies
  become: true
  apt:
    name:
      - libx11-dev
      - libxft-dev
      - libxinerama-dev
      - libx11-xcb-dev
      - libxcb-res0-dev

- name: Download DWM
  become: true
  git:
    repo: https://github.com/h3x0c4t/dwm-patched
    dest: /usr/local/src/dwm
    update: yes

- name: Run make clean install
  become: true
  command: make clean install
  args:
    chdir: /usr/local/src/dwm

- name: Install dmenu
  become: true
  apt:
    name:
      - dmenu

- name: Install dex
  become: true
  apt:
    name:
      - dex

- name: Create .xinitrc
  become: true
  copy:
    src: .xinitrc
    dest: "{{ ansible_env.HOME }}/.xinitrc"
    owner: "{{ ansible_env.USER }}"
    group: "{{ ansible_env.USER }}"
    mode: 0755
